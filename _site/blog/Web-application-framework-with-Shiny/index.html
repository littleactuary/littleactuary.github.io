<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Web application framework with Shiny &#8211; Little Actuary</title>
<meta name="description" content="R application with an user-friendly web interface">
<meta name="keywords" content="R, Shiny, Actuary, Actuarial, Actuariat, Actuaire, application, web">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Web application framework with Shiny">
<meta name="twitter:description" content="R application with an user-friendly web interface">
<meta name="twitter:site" content="@duc_hien_vu">
<meta name="twitter:creator" content="@duc_hien_vu">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Web application framework with Shiny">
<meta property="og:description" content="R application with an user-friendly web interface">
<meta property="og:url" content="/blog/Web-application-framework-with-Shiny/">
<meta property="og:site_name" content="Little Actuary">





<link rel="canonical" href="/blog/Web-application-framework-with-Shiny/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Little Actuary Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="/assets/js/vendor/html5shiv.min.js"></script>
  <script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="/about/" >About</a></li>
		  
		    
		        
		    
		    <li><a href="/vitae/" >Vitae</a></li>
		  
		    
		        
		    
		    <li><a href="/blog/" >Blog</a></li>
		  
		    
		        
		    
		    <li><a href="/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="/" class="site-logo" rel="home" title="Little Actuary"><img src="/images/site-logo.png" width="200" height="200" alt="Little Actuary logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="/">Little Actuary</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">A blog to keep track of my progress on Actuarial Science and Data Science learning</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="/tags/#R" title="Pages tagged R">R</a></li><li><a href="/tags/#Shiny" title="Pages tagged Shiny">Shiny</a></li><li><a href="/tags/#Actuary" title="Pages tagged Actuary">Actuary</a></li><li><a href="/tags/#Actuarial" title="Pages tagged Actuarial">Actuarial</a></li><li><a href="/tags/#Actuariat" title="Pages tagged Actuariat">Actuariat</a></li><li><a href="/tags/#Actuaire" title="Pages tagged Actuaire">Actuaire</a></li><li><a href="/tags/#application" title="Pages tagged application">application</a></li><li><a href="/tags/#web" title="Pages tagged web">web</a></li>
        </ul>
        
          <h1 class="entry-title">Web application framework with Shiny</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        
          <img src="/images/bio-photo.jpg" class="bio-photo" alt="Duc-Hien VU bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Duc-Hien VU</span></span>
        <span class="entry-date date published"><time datetime="2015-11-30T20:39:55+01:00"><i class="fa fa-calendar-o"></i> November 30, 2015</time></span>
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=R,Shiny,Actuary,Actuarial,Actuariat,Actuaire,application,web&amp;text=Web%20application%20framework%20with%20Shiny&amp;url=/blog/Web-application-framework-with-Shiny/&amp;via=duc_hien_vu" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=/blog/Web-application-framework-with-Shiny/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=/blog/Web-application-framework-with-Shiny/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
      </footer>
      <div class="entry-content">
        <p>In my final internship, I’ve had to deploy an application for large claims (major losses) reserving. Since the method required some serious statistical modeling methods, I didn’t choose Excel/VBA. R seemed to be a good choice because of its statistical power and also of some useful R packages that deal with extreme values theory and distribution fitting. The question was: “How can I build a friendly-user application with R?”. The purpose is that the end users don’t need to open R and run a hundred line of R code. My first thought was to install RExcel in order to use Excel spredsheet as the application interface. I had found a short presentation of using RExcel with the ChainLadder package in R but this solution seems to be a little out of date. Then I tried the TclTk package in R. Not too cool in my opinion! Finally I found something amazing called <a href="http://shiny.rstudio.com" target="_blank"><strong>Shiny</strong></a>. It’s an R package that allows you to deploy an interactive web application with R.</p>

<ul id="markdown-toc">
  <li><a href="#get-inspired" id="markdown-toc-get-inspired">Get inspired</a></li>
  <li><a href="#what-is-shiny" id="markdown-toc-what-is-shiny">What is Shiny?</a></li>
  <li><a href="#how-to-learn-shiny" id="markdown-toc-how-to-learn-shiny">How to learn Shiny?</a></li>
  <li><a href="#shiny-structure" id="markdown-toc-shiny-structure">Shiny structure</a></li>
  <li><a href="#some-shiny-codes" id="markdown-toc-some-shiny-codes">Some Shiny codes</a></li>
  <li><a href="#packaging" id="markdown-toc-packaging">Packaging</a></li>
</ul>

<h2 id="get-inspired">Get inspired</h2>

<p>To get you inspired, <a href="http://shiny.rstudio.com/gallery/" target="_blank"><strong>here’s a galery of Shiny applications</strong></a><br />
You will see that R users have made many amazing applications with Shiny. Since I only passed a little time of my internship to deploy the application (my main mission is to develop the actuarial model), I couldn’t build a very complex one, but I think it seems already cooler than an Excel spredsheet. It looks like this:</p>

<p><a href="/images/MajorLossesReserving.gif"><img src="/images/MajorLossesReserving.gif" alt="image" /></a></p>

<h2 id="what-is-shiny">What is Shiny?</h2>

<p>Ok, now we will look a little bit closer to Shiny. Firstly, Shiny proposes functions with R syntaxes that replace HTML, CSS, Javascript. So you can somehow build a web interface by writing R code. Secondly, Shiny has a feature called Interactivity, which is, in my opinion, a big difference in comparison to standard R programs. There’s an interaction between the client side (through the user interface) and the server side (your R program). Thirdly, you can run Shiny apps locally with RStudio and its browser or with R and a web browser such as Google Chrome or Internet Explorer. You can also upload your apps on a cloud (the Shiny server) and run them online. I didn’t try the last option because of the confidentiality concern. So I will show you in this post how to deploy and run a Shiny app locally on your computer.</p>

<p>Let’s begin by installing the Shiny package</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">install.packages<span class="p">(</span><span class="s">&quot;Shiny&quot;</span><span class="p">)</span></code></pre></div>

<h2 id="how-to-learn-shiny">How to learn Shiny?</h2>
<p>The best way to learn Shiny, of course, is to watch the series of <a href="http://shiny.rstudio.com/tutorial/" target="_blank"><strong>Shiny tutorials</strong></a> It will cover all the Shiny topics from beginner to advanced level. It will however takes time. What I did in my internship is to look at a simple Shiny example and then began directly to build my app. When there was something I didn’t know how to do, I googled it. It is maybe not a good habit of learning, but in a limit time constraint, it has allowed me to build an application that meets all my need (though it’s not optimal).</p>

<p>So the point is, the series of Shiny tutorials is where to start learning from. Other useful guides could by found on Goolge. Since I have passed some time on doing the same thing, I’ll try to list all the important points I have learned about Shiny in the next sections for you, so that you don’t have to google too many times when developing your Shiny app.</p>

<h2 id="shiny-structure">Shiny structure</h2>

<p>The logic of Shiny relies on the two notions that are very close to the web ones: client side and server side. Client side is the component in interaction with the end-users. Server side is the component through what your R program receives requests from users, runs R code and then send the response to the client side.</p>

<center>
<a href="/images/shiny_scheme.png"><img src="/images/shiny_scheme.png" alt="image" /></a>
</center>

<p>Based on this principle, Shiny requires 2 R scripts: one for the User Interface, named <code class="highlighter-rouge">ui.r</code>, and one for the Server, named <code class="highlighter-rouge">server.r</code>. What you want to display on the the interface needs to be declared in the <code class="highlighter-rouge">ui.r</code> script; how this thing is done needs to be defined in <code class="highlighter-rouge">server.r</code>. Below is a typical structure of a Shiny application:</p>

<center>
<a href="/images/shiny_structure.png"><img src="/images/shiny_structure.png" alt="image" /></a>
</center>

<p>R calls the Shiny app in a main script, thanks to the Shiny package. I prefer to create a folder named <code class="highlighter-rouge">Shiny folder</code> where I store 2 principal elements: <code class="highlighter-rouge">ui.r</code> and <code class="highlighter-rouge">server.r</code>. You may notice that there is a third element named <code class="highlighter-rouge">www</code>. It’s a sub-folder where I store graphical elements (images, icons, etc.) and file (pdf) that I want to display on my application. (Attention, these three elements need to be named exactly that way). I did not show it in the scheme but the <code class="highlighter-rouge">server.r</code> can call other R scripts. Normally, an application has to read input files stored somewhere that I’ve named <code class="highlighter-rouge">Input folder</code> and write output files (in addition of displaying them on the user interface) in <code class="highlighter-rouge">Output folder</code>.</p>

<p>The user interface can be displayed on the default browser of RStudio if you run Shiny through it, or on a web browser (if you are using Internet explorer version &lt; 10, you could get into trouble with Shiny). This user interface works exactly like a web page. There are buttons, input text, etc. for you to make your decision and there will be output (graphs, images, tables, etc.) displayed on the main panel, or separately on different tabs/panels.</p>

<h2 id="some-shiny-codes">Some Shiny codes</h2>

<h3 id="choosing-browser">Choosing Browser</h3>
<p>You can either launch your Shiny app on the RStudio browser:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">Shiny<span class="o">::</span>runApp<span class="p">(</span><span class="s">&#39;./Shiny folder/&#39;</span><span class="p">)</span></code></pre></div>

<p>(An alternative way: in RStudio, when you open <code class="highlighter-rouge">server.r</code> and <code class="highlighter-rouge">ui.r</code>, you can see the <code class="highlighter-rouge">Run App</code> button on the top right. You can launch your app by clicking on it) <br />
If you want to launch you app on your default web browser instead of the browser of RStudio:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">Shiny<span class="o">::</span>runApp<span class="p">(</span><span class="s">&#39;./Shiny folder/&#39;</span><span class="p">,</span> launch.browser <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></div>

<h3 id="shiny-theme">Shiny theme</h3>

<p>Shiny has some pre-built themes for you. All you need to do is to install the <a href="http://rstudio.github.io/shinythemes/" target="_blank"><strong>shiny theme</strong></a> package and choose the theme you want.</p>

<h3 id="title-panel">Title panel</h3>

<p>In <code class="highlighter-rouge">ui.r</code>, you can define a header for you application where you show the app name and the logo for example. This is done thanks to the <code class="highlighter-rouge">titlePanel()</code></p>

<div class="highlight"><pre><code class="language-r" data-lang="r">shinyUI<span class="p">(</span>fluidPage<span class="p">(</span>
    theme <span class="o">=</span> shinytheme<span class="p">(</span><span class="s">&quot;cerulean&quot;</span><span class="p">),</span>

    <span class="c1"># Application title</span>
    titlePanel<span class="p">(</span>
        fluidRow<span class="p">(</span>
            column<span class="p">(</span><span class="m">9</span><span class="p">,</span> strong<span class="p">(</span><span class="s">&quot;Name of you application&quot;</span><span class="p">),</span>align <span class="o">=</span> <span class="s">&quot;center&quot;</span> <span class="p">),</span>
            column<span class="p">(</span><span class="m">3</span><span class="p">,</span>img<span class="p">(</span>src <span class="o">=</span> <span class="s">&quot;logo.png&quot;</span><span class="p">,</span> height <span class="o">=</span> <span class="m">72</span><span class="p">,</span> width <span class="o">=</span> <span class="m">150</span><span class="p">))</span>
        <span class="p">)</span>
    <span class="p">),</span>

    sidebarLayout<span class="p">(</span>
        sidebarPanel<span class="p">(</span><span class="kc">...</span><span class="p">),</span>
        mainPanel<span class="p">(</span><span class="kc">...</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span></code></pre></div>

<p>Since the Shiny interface is a web interface, it is designed with the famous Bootstrap framework. The Shiny page is divided into 12 columns and all elements will be arranged according to these 12 columns. Here I devided the title panel into 2 parts, the first one takes 9/12 columns to show the app name, the second one takes 3/12 collumns to show the logo. Please note that logo.png needs to be stored in the <code class="highlighter-rouge">www</code>sub-folder.</p>

<h3 id="tab-panel">Tab panel</h3>

<p>Look at the screenshot of the application I’ve created in my internship. There are different tab panels. You can create as many tab panels (and sub-tab panels) as you want.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">mainPanel<span class="p">(</span>

    tabsetPanel<span class="p">(</span> 
        tabPanel<span class="p">(</span><span class="s">&quot;tab 1&quot;</span><span class="p">,</span> 
            tabsetPanel<span class="p">(</span>
                tabPanel<span class="p">(</span><span class="s">&quot;sub-tab 1a&quot;</span><span class="p">,</span> dataTableOutput<span class="p">(</span><span class="s">&quot;st1a&quot;</span><span class="p">)),</span>
                tabPanel<span class="p">(</span><span class="s">&quot;sub-tab 1b&quot;</span><span class="p">,</span> dataTableOutput<span class="p">(</span><span class="s">&quot;st1b&quot;</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="p">),</span> <span class="c1"># end of tab 1</span>

        tabPanel<span class="p">(</span><span class="s">&quot;tab 2&quot;</span><span class="p">,</span> 
            tabsetPanel<span class="p">(</span>
                tabPanel<span class="p">(</span><span class="s">&quot;sub-tab 2a&quot;</span><span class="p">,</span> dataTableOutput<span class="p">(</span><span class="s">&quot;st2a&quot;</span><span class="p">)),</span>
                tabPanel<span class="p">(</span><span class="s">&quot;sub-tab 2b&quot;</span><span class="p">,</span> dataTableOutput<span class="p">(</span><span class="s">&quot;st2b&quot;</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span></code></pre></div>

<h3 id="event-reactivity">Event reactivity</h3>
<p>You want to add a button in the user interface so that your app does something in response to the users demand when they click on the button?</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># in ui.r</span>
<span class="c1"># define the Inputs Reading button</span>
actionButton<span class="p">(</span><span class="s">&quot;read_inputs&quot;</span><span class="p">,</span><span class="s">&quot;Read Inputs&quot;</span><span class="p">),</span>

<span class="c1"># in server.r:</span>
variable1 <span class="o">&lt;-</span> eventReactive<span class="p">(</span>input<span class="o">$</span>read_inputs<span class="p">,</span> <span class="p">{</span>
    <span class="c1"># what you want to do when the user clicks on the button</span>
<span class="p">},</span></code></pre></div>

<h3 id="two-way-to-display-a-table">Two way to display a table</h3>

<p>In <code class="highlighter-rouge">server.r</code>, to put a table into the output() list in order to display it on the user interface later, you can either use the <code class="highlighter-rouge">renderTable()</code> (not pretty) or the <code class="highlighter-rouge">renderDataTable()</code> (much more beautiful). With the second function, you can customize the table with options.<br />
For example, if you want to show your entire table in one page and desactivate the search option:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">example <span class="o">&lt;-</span> renderDataTable<span class="p">({</span>
<span class="c1"># your table</span>
<span class="p">},</span>options <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>searching <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> searchable<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span> info<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span> paging <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="p">)</span></code></pre></div>

<p>To customize the page length, the column width:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">options <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>lengthMenu <span class="o">=</span> <span class="kt">list</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">15</span><span class="p">,</span> <span class="m">30</span><span class="p">,</span> <span class="m">50</span><span class="p">,</span> <span class="m">-1</span><span class="p">),</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;15&#39;</span><span class="p">,</span> <span class="s">&#39;30&#39;</span><span class="p">,</span> <span class="s">&#39;50&#39;</span><span class="p">,</span> <span class="s">&#39;All&#39;</span><span class="p">)),</span> pageLength <span class="o">=</span> <span class="m">15</span><span class="p">,</span> autoWidth <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> columnDefs <span class="o">=</span> <span class="kt">list</span><span class="p">(</span><span class="kt">list</span><span class="p">(</span>width <span class="o">=</span> <span class="s">&#39;200px&#39;</span><span class="p">,</span> targets <span class="o">=</span> <span class="m">1</span><span class="p">)))</span></code></pre></div>

<h3 id="streamlining-your-shiny-apps">Streamlining your Shiny apps</h3>
<p>Sometimes, you need to order different parts of code in a given scenario. Unlike the normal logic of R, Shiny doesn’t interprete your code in the descending order. In <code class="highlighter-rouge">server.r</code> each bloc of code aims to return an output element and Shiny will interprete them almost simultaneously. It’s very often that one output element depends on others. In Shiny you need to tell the program when to do or to not do something.</p>

<p>The simplest way is to create reactive button so that a bloc of code will only be interpreted when the user clicks on the button. However, I find it not practical to create too many buttons.</p>

<p>A good way is to use reactive expressions that let you control which parts of your app update when. You can take a look at <a href="http://shiny.rstudio.com/tutorial/lesson6/" target="_blank"><strong>this tutorial</strong></a> for a better understanding of reactive expressions.</p>

<p>Every now and then, I find it more convenient to manually streamline my program by using <code class="highlighter-rouge">reactiveValues</code> as a condition. The idea is to create reactive boolean variables to trigger a bloc of code.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">display.order <span class="o">&lt;-</span> reactiveValues<span class="p">(</span>part2 <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> part3 <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span></code></pre></div>

<h3 id="conditional-panel">Conditional panel</h3>
<p>In <code class="highlighter-rouge">ui.r</code>, you can tell Shiny when to show or not to show an output element with a specific condition:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">conditionalPanel<span class="p">(</span>condition <span class="o">=</span> <span class="s">&quot;input.currency == &#39;EUR&#39;&quot;</span><span class="p">,</span> <span class="kc">...</span><span class="p">)),</span>  
conditionalPanel<span class="p">(</span>condition <span class="o">=</span> <span class="s">&quot;input.currency == &#39;GBP&#39;&quot;</span><span class="p">,</span> <span class="kc">...</span><span class="p">))</span></code></pre></div>

<h3 id="loading-circle">Loading circle</h3>
<p>Every once in a while, it takes time to run your code and you want to tell the users that the R program is still running. Like a web page loading, you can show a loading circle whenever your R program is busy. To do so, you first need to save this “loading_circle.gif” image into the <code class="highlighter-rouge">www</code> folder,</p>

<center>
<a href="/images/loading_circle.gif"><img src="/images/loading_circle.gif" alt="image" /></a>
</center>

<p>and then add this line of code in the <code class="highlighter-rouge">ui.r</code>, in a specific area that you want to show the loading circle:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">conditionalPanel<span class="p">(</span>condition<span class="o">=</span><span class="s">&quot;$(&#39;html&#39;).hasClass(&#39;shiny-busy&#39;)&quot;</span><span class="p">,</span>
tags<span class="o">$</span>img<span class="p">(</span>src<span class="o">=</span><span class="s">&quot;loading_circle.gif&quot;</span><span class="p">)</span>
<span class="p">)</span></code></pre></div>

<h3 id="close-your-app">Close your app</h3>

<p>2 options to close your app: create a button “close” in <code class="highlighter-rouge">ui.r</code> and add this in <code class="highlighter-rouge">server.r</code>:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">observe<span class="p">({</span>
    <span class="kr">if</span><span class="p">(</span>input<span class="o">$</span>close <span class="o">&gt;</span> <span class="m">0</span><span class="p">){</span>
        stopApp<span class="p">(</span><span class="kc">NULL</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})</span></code></pre></div>

<p>or close your app when the browser is closed:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">shinyServer<span class="p">(</span><span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">,</span> session<span class="p">){</span>
    session<span class="o">$</span>onSessionEnded<span class="p">(</span><span class="kr">function</span><span class="p">()</span> <span class="p">{</span>
        stopApp<span class="p">(</span><span class="kc">NULL</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">})</span></code></pre></div>

<h2 id="packaging">Packaging</h2>
<p>Until now, you still need to open R and launch Shiny from within it. If your app will be used by other people, it will be cool to create an independent desktop app that users can launch by clicking on an icon, like other applications in your computer. You can do it as followed.</p>

<p>Firstly, create a folder for you app, name it <code class="highlighter-rouge">Your app</code> for example, and then put all your tool elements in it (Main.r, Shiny folder, Input folder, Output folder)</p>

<h3 id="r-portable">R Portable</h3>
<p>Building a desktop app with R is like packaging all necessary elements, R included, into a main folder. Why do you need to put R into your app folder? Because your app will be delivered to the clients, who don’t necessarly have R installed in their computer. A solution suggested by many people is to download R portable and put it in the main folder, with all other elements. Download R portable <a href="http://sourceforge.net/projects/rportable/" target="_blank"><strong>here</strong></a>. Put the folder <code class="highlighter-rouge">R-Portable</code> in <code class="highlighter-rouge">Your app</code> folder.</p>

<h3 id="web-browser">Web browser</h3>
<p>Since we’are using R portable instead of RStudio, you definitely need a web brower.  In case you are using Internet Explorer version &lt; 10 which does not support Shiny, please either:</p>

<ul>
  <li>update your IE browser,</li>
  <li>install GoogleChrome or Firefox and set them as your default web browser.</li>
</ul>

<p>If you want to include a web browser into you whole app, you can download Goolge Chrome Portable <a href="http://portableapps.com/apps/internet/google_chrome_portable" target="_blank"><strong>here</strong></a>. Then put the <code class="highlighter-rouge">GoogleChromePortable</code> folder in <code class="highlighter-rouge">Your app</code> folder. I have tested it on different computers, sometimes it works, somtimes it doesn’t and I don’t know why. Anyway, I think nowadays people all have a modern web browser in their computer so you don’t need to prepare google chrome portable for them.</p>

<h3 id="mainr">main.R</h3>
<p>Now that our app works with a web browser, we need to speficy it in our <code class="highlighter-rouge">main.r</code> script:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">Shiny<span class="o">::</span>runApp<span class="p">(</span><span class="s">&#39;./Shiny folder/&#39;</span><span class="p">,</span> launch.browser <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span></code></pre></div>

<h3 id="bach-file">Bach file</h3>
<p>Now we’re moving to the most exciting step: creating a bach file to tell Windows what to do with the above script. Create a text file (with notepad or whatever you want), write down the below line of code, close and save it with a <code class="highlighter-rouge">.bat</code> extention name. For example, I name my batch file <code class="highlighter-rouge">YourApp.bat</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SET ROPTS=--no-save --no-environ --no-init-file --no-restore --no-Rconsole
R-Portable\App\R-Portable\bin\Rscript.exe %ROPTS% main.R 1&gt; ShinyApp.log 2&gt;&amp;1
</code></pre>
</div>

<p>This batch file tell your computer to find <code class="highlighter-rouge">Rscript.exe</code> in you <code class="highlighter-rouge">R-Portable folder</code>, use it to run <code class="highlighter-rouge">main.r</code> in order to call your Shiny app. You may notice the <code class="highlighter-rouge">ShinyApp.log</code> in the above line of code. This is to create a log file. All messages of R console, as well as messages from your <code class="highlighter-rouge">print()</code> function will be saved into the batch file.</p>

<p>Now your program will look like this:</p>

<center>
<a href="/images/shiny.png"><img src="/images/shiny.png" alt="image" /></a>
</center>

<p>To launch your app, you just need to double click on your batch file. You can also create a shortcut for this batch file, set an icon for it, and put it anywhere on your computer to launch your app.</p>

<p>For more detail about deploying Desktop Apps with R, please visit: <br />
<a href="http://www.r-bloggers.com/deploying-desktop-apps-with-r/" target="_blank">http://www.r-bloggers.com/deploying-desktop-apps-with-r/</a></p>

        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'littleactuary'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/blog/connecting-R-and-Cpp-with-Rcpp/" class="btn" title="Calling C++ from R with Rcpp">Previous</a>
      
      
        <a href="/blog/Calcul-stochastique-en-bref/" class="btn" title="Calcul stochastique en bref">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2016 Duc-Hien VU. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/duc_hien_vu" title="Duc-Hien VU on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://facebook.com/vuhien" title="Duc-Hien VU on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	
	<a href="https://linkedin.com/in/duc-hien-vu-50b20627" title="Duc-Hien VU on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	<a href="https://instagram.com/vuduchien" title="Duc-Hien VU on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	
	<a href="https://github.com/littleactuary" title="Duc-Hien VU on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = '';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




</body>
</html>
